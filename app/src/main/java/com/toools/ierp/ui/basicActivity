
import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
import com.toools.ierp.databinding.ActivityMainBinding
import dagger.hilt.android.AndroidEntryPoint

@AndroidEntryPoint
class MainActivity : AppCompatActivity() {

    private lateinit var binding: ActivityMainBinding
    private val viewModel:  SplashViewModel by viewModels()

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)
        setUpObservers()
        setUpView()

        toMain()
    }

    private fun toMain() {

        val intent = Intent(this, MainActivity::class.java)

        startActivity(intent)
    }

    fun setUpObservers() {
            viewModel.addUserLiveData.observe(this){ response ->

                when (response.status) {
                    Resource.Status.LOADING -> {}

                    Resource.Status.SUCCESS -> {
                        //pasar el token a login por shared preferences
                        val editor = prefs.edit()
                        editor.putString(ConstantHelper.registeredFirebaseToken, tokenFirebase)
                        editor.apply()
                    }
                    Resource.Status.ERROR -> {

                    }
                }
            }
        }
}

